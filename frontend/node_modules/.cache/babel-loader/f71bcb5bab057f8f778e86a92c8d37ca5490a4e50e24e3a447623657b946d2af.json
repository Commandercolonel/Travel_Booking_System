{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect}from'react';import{HOTELS}from'../data/mockData';import{jsx as _jsx}from\"react/jsx-runtime\";const BookingContext=/*#__PURE__*/createContext();export function useBooking(){return useContext(BookingContext);}export function BookingProvider(_ref){let{children}=_ref;const[searchResults,setSearchResults]=useState(HOTELS);const[bookings,setBookings]=useState(()=>{try{const raw=localStorage.getItem('bookings');return raw?JSON.parse(raw):[];}catch(e){return[];}});// persist bookings to localStorage\nuseEffect(()=>{try{localStorage.setItem('bookings',JSON.stringify(bookings));}catch(e){// ignore write errors\n}},[bookings]);function search(_ref2){let{destination}=_ref2;const q=(destination||'').toLowerCase();const results=HOTELS.filter(h=>h.name.toLowerCase().includes(q)||h.location.toLowerCase().includes(q));setSearchResults(results);}function getHotelById(id){return HOTELS.find(h=>h.id===id);}function createBooking(_ref3){let{hotelId,name,email,guests,checkin,checkout}=_ref3;const id=\"b\".concat(Date.now());const hotel=getHotelById(hotelId);const total=hotel?hotel.price*(Number(guests)||1):0;const booking={id,hotel,name,email,guests:Number(guests),checkin,checkout,total};setBookings(prev=>[booking,...prev]);return booking;}function removeBooking(id){setBookings(prev=>prev.filter(b=>b.id!==id));}function getBookingById(id){return bookings.find(b=>b.id===id);}return/*#__PURE__*/_jsx(BookingContext.Provider,{value:{searchResults,search,createBooking,getHotelById,getBookingById,bookings,removeBooking},children:children});}","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","HOTELS","jsx","_jsx","BookingContext","useBooking","BookingProvider","_ref","children","searchResults","setSearchResults","bookings","setBookings","raw","localStorage","getItem","JSON","parse","e","setItem","stringify","search","_ref2","destination","q","toLowerCase","results","filter","h","name","includes","location","getHotelById","id","find","createBooking","_ref3","hotelId","email","guests","checkin","checkout","concat","Date","now","hotel","total","price","Number","booking","prev","removeBooking","b","getBookingById","Provider","value"],"sources":["E:/Travel-Booking/travel-booking-app/frontend/src/context/BookingContext.jsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { HOTELS } from '../data/mockData';\r\n\r\nconst BookingContext = createContext();\r\n\r\nexport function useBooking() {\r\n  return useContext(BookingContext);\r\n}\r\n\r\nexport function BookingProvider({ children }) {\r\n  const [searchResults, setSearchResults] = useState(HOTELS);\r\n  const [bookings, setBookings] = useState(() => {\r\n    try {\r\n      const raw = localStorage.getItem('bookings');\r\n      return raw ? JSON.parse(raw) : [];\r\n    } catch (e) {\r\n      return [];\r\n    }\r\n  });\r\n\r\n  // persist bookings to localStorage\r\n  useEffect(() => {\r\n    try {\r\n      localStorage.setItem('bookings', JSON.stringify(bookings));\r\n    } catch (e) {\r\n      // ignore write errors\r\n    }\r\n  }, [bookings]);\r\n\r\n  function search({ destination }) {\r\n    const q = (destination || '').toLowerCase();\r\n    const results = HOTELS.filter(h => h.name.toLowerCase().includes(q) || h.location.toLowerCase().includes(q));\r\n    setSearchResults(results);\r\n  }\r\n\r\n  function getHotelById(id) {\r\n    return HOTELS.find(h => h.id === id);\r\n  }\r\n\r\n  function createBooking({ hotelId, name, email, guests, checkin, checkout }) {\r\n    const id = `b${Date.now()}`;\r\n    const hotel = getHotelById(hotelId);\r\n    const total = hotel ? hotel.price * (Number(guests) || 1) : 0;\r\n    const booking = { id, hotel, name, email, guests: Number(guests), checkin, checkout, total };\r\n    setBookings(prev => [booking, ...prev]);\r\n    return booking;\r\n  }\r\n\r\n  function removeBooking(id) {\r\n    setBookings(prev => prev.filter(b => b.id !== id));\r\n  }\r\n\r\n  function getBookingById(id) {\r\n    return bookings.find(b => b.id === id);\r\n  }\r\n\r\n  return (\r\n    <BookingContext.Provider value={{ searchResults, search, createBooking, getHotelById, getBookingById, bookings, removeBooking }}>\r\n      {children}\r\n    </BookingContext.Provider>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}