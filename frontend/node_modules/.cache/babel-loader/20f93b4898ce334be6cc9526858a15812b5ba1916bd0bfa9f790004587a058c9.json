{"ast":null,"code":"var _jsxFileName = \"E:\\\\Travel-Booking\\\\travel-booking-app\\\\frontend\\\\src\\\\context\\\\BookingContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { HOTELS, FLIGHTS, BUSES, TRAINS, TOURS } from '../data/mockData';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BookingContext = /*#__PURE__*/createContext();\nexport function useBooking() {\n  _s();\n  return useContext(BookingContext);\n}\n_s(useBooking, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport function BookingProvider({\n  children\n}) {\n  _s2();\n  const [searchResults, setSearchResults] = useState(HOTELS);\n  const [bookings, setBookings] = useState(() => {\n    try {\n      const raw = localStorage.getItem('bookings');\n      return raw ? JSON.parse(raw) : [];\n    } catch (e) {\n      return [];\n    }\n  });\n\n  // persist bookings to localStorage\n  useEffect(() => {\n    try {\n      localStorage.setItem('bookings', JSON.stringify(bookings));\n    } catch (e) {\n      // ignore write errors\n    }\n  }, [bookings]);\n  function search({\n    destination\n  }) {\n    const q = (destination || '').toLowerCase();\n    // Search across hotels and tours for location/name matches (simple implementation)\n    const hotelResults = HOTELS.filter(h => h.name.toLowerCase().includes(q) || h.location.toLowerCase().includes(q));\n    const tourResults = TOURS.filter(t => t.name.toLowerCase().includes(q) || (t.location || '').toLowerCase().includes(q));\n    setSearchResults([...hotelResults, ...tourResults]);\n  }\n  function getHotelById(id) {\n    return HOTELS.find(h => h.id === id);\n  }\n  function getItemByAnyId(id) {\n    if (!id) return null;\n    const prefix = id[0];\n    if (prefix === 'h') return {\n      type: 'hotel',\n      item: HOTELS.find(x => x.id === id)\n    };\n    if (prefix === 'f') return {\n      type: 'flight',\n      item: FLIGHTS.find(x => x.id === id)\n    };\n    if (prefix === 'b') return {\n      type: 'bus',\n      item: BUSES.find(x => x.id === id)\n    };\n    if (prefix === 't') return {\n      type: 'train',\n      item: TRAINS.find(x => x.id === id)\n    };\n    if (prefix === 'p') return {\n      type: 'tour',\n      item: TOURS.find(x => x.id === id)\n    };\n    // fallback - search all\n    const all = [...HOTELS, ...FLIGHTS, ...BUSES, ...TRAINS, ...TOURS];\n    const found = all.find(x => x.id === id);\n    return found ? {\n      type: 'unknown',\n      item: found\n    } : null;\n  }\n  function createBooking(data) {\n    var _ref, _ref2, _data$passengers;\n    // data may contain: itemId, itemType (optional), name, email, passengers/guests, checkin, checkout, travelDate, class\n    const id = `bk${Date.now()}`;\n    const itemLookup = getItemByAnyId(data.itemId);\n    const item = (itemLookup === null || itemLookup === void 0 ? void 0 : itemLookup.item) || null;\n    const itemType = (itemLookup === null || itemLookup === void 0 ? void 0 : itemLookup.type) || data.itemType || 'unknown';\n\n    // compute total\n    let total = 0;\n    const count = Number((_ref = (_ref2 = (_data$passengers = data.passengers) !== null && _data$passengers !== void 0 ? _data$passengers : data.guests) !== null && _ref2 !== void 0 ? _ref2 : data.travelers) !== null && _ref !== void 0 ? _ref : 1) || 1;\n    if (!item) total = 0;else if (itemType === 'hotel') {\n      // compute nights if dates provided\n      let nights = 1;\n      if (data.checkin && data.checkout) {\n        const ci = new Date(data.checkin);\n        const co = new Date(data.checkout);\n        const diff = Math.ceil((co - ci) / (1000 * 60 * 60 * 24));\n        nights = diff > 0 ? diff : 1;\n      }\n      total = (item.price || 0) * nights * count;\n    } else if (['flight', 'bus', 'train', 'tour'].includes(itemType)) {\n      total = (item.price || 0) * count;\n    } else {\n      total = (item.price || 0) * count;\n    }\n    const booking = {\n      id,\n      itemType,\n      item,\n      name: data.name,\n      email: data.email,\n      passengers: count,\n      checkin: data.checkin || null,\n      checkout: data.checkout || null,\n      travelDate: data.travelDate || data.checkin || null,\n      extra: data.extra || null,\n      total\n    };\n    setBookings(prev => [booking, ...prev]);\n    return booking;\n  }\n  function removeBooking(id) {\n    setBookings(prev => prev.filter(b => b.id !== id));\n  }\n  function getBookingById(id) {\n    return bookings.find(b => b.id === id);\n  }\n  return /*#__PURE__*/_jsxDEV(BookingContext.Provider, {\n    value: {\n      searchResults,\n      search,\n      createBooking,\n      getHotelById,\n      getItemByAnyId,\n      getBookingById,\n      bookings,\n      removeBooking\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n}\n_s2(BookingProvider, \"e+R6n+RbRCUCabr8Yu8dtLzhQuQ=\");\n_c = BookingProvider;\nvar _c;\n$RefreshReg$(_c, \"BookingProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","HOTELS","FLIGHTS","BUSES","TRAINS","TOURS","jsxDEV","_jsxDEV","BookingContext","useBooking","_s","BookingProvider","children","_s2","searchResults","setSearchResults","bookings","setBookings","raw","localStorage","getItem","JSON","parse","e","setItem","stringify","search","destination","q","toLowerCase","hotelResults","filter","h","name","includes","location","tourResults","t","getHotelById","id","find","getItemByAnyId","prefix","type","item","x","all","found","createBooking","data","_ref","_ref2","_data$passengers","Date","now","itemLookup","itemId","itemType","total","count","Number","passengers","guests","travelers","nights","checkin","checkout","ci","co","diff","Math","ceil","price","booking","email","travelDate","extra","prev","removeBooking","b","getBookingById","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["E:/Travel-Booking/travel-booking-app/frontend/src/context/BookingContext.jsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { HOTELS, FLIGHTS, BUSES, TRAINS, TOURS } from '../data/mockData';\r\n\r\nconst BookingContext = createContext();\r\n\r\nexport function useBooking() {\r\n  return useContext(BookingContext);\r\n}\r\n\r\nexport function BookingProvider({ children }) {\r\n  const [searchResults, setSearchResults] = useState(HOTELS);\r\n  const [bookings, setBookings] = useState(() => {\r\n    try {\r\n      const raw = localStorage.getItem('bookings');\r\n      return raw ? JSON.parse(raw) : [];\r\n    } catch (e) {\r\n      return [];\r\n    }\r\n  });\r\n\r\n  // persist bookings to localStorage\r\n  useEffect(() => {\r\n    try {\r\n      localStorage.setItem('bookings', JSON.stringify(bookings));\r\n    } catch (e) {\r\n      // ignore write errors\r\n    }\r\n  }, [bookings]);\r\n\r\n  function search({ destination }) {\r\n    const q = (destination || '').toLowerCase();\r\n    // Search across hotels and tours for location/name matches (simple implementation)\r\n    const hotelResults = HOTELS.filter(h => h.name.toLowerCase().includes(q) || h.location.toLowerCase().includes(q));\r\n    const tourResults = TOURS.filter(t => t.name.toLowerCase().includes(q) || (t.location||'').toLowerCase().includes(q));\r\n    setSearchResults([...hotelResults, ...tourResults]);\r\n  }\r\n\r\n  function getHotelById(id) {\r\n    return HOTELS.find(h => h.id === id);\r\n  }\r\n\r\n  function getItemByAnyId(id) {\r\n    if (!id) return null;\r\n    const prefix = id[0];\r\n    if (prefix === 'h') return { type: 'hotel', item: HOTELS.find(x => x.id === id) };\r\n    if (prefix === 'f') return { type: 'flight', item: FLIGHTS.find(x => x.id === id) };\r\n    if (prefix === 'b') return { type: 'bus', item: BUSES.find(x => x.id === id) };\r\n    if (prefix === 't') return { type: 'train', item: TRAINS.find(x => x.id === id) };\r\n    if (prefix === 'p') return { type: 'tour', item: TOURS.find(x => x.id === id) };\r\n    // fallback - search all\r\n    const all = [...HOTELS, ...FLIGHTS, ...BUSES, ...TRAINS, ...TOURS];\r\n    const found = all.find(x => x.id === id);\r\n    return found ? { type: 'unknown', item: found } : null;\r\n  }\r\n\r\n  function createBooking(data) {\r\n    // data may contain: itemId, itemType (optional), name, email, passengers/guests, checkin, checkout, travelDate, class\r\n    const id = `bk${Date.now()}`;\r\n    const itemLookup = getItemByAnyId(data.itemId);\r\n    const item = itemLookup?.item || null;\r\n    const itemType = itemLookup?.type || data.itemType || 'unknown';\r\n\r\n    // compute total\r\n    let total = 0;\r\n    const count = Number(data.passengers ?? data.guests ?? data.travelers ?? 1) || 1;\r\n    if (!item) total = 0;\r\n    else if (itemType === 'hotel') {\r\n      // compute nights if dates provided\r\n      let nights = 1;\r\n      if (data.checkin && data.checkout) {\r\n        const ci = new Date(data.checkin);\r\n        const co = new Date(data.checkout);\r\n        const diff = Math.ceil((co - ci) / (1000 * 60 * 60 * 24));\r\n        nights = diff > 0 ? diff : 1;\r\n      }\r\n      total = (item.price || 0) * nights * count;\r\n    } else if (['flight', 'bus', 'train', 'tour'].includes(itemType)) {\r\n      total = (item.price || 0) * count;\r\n    } else {\r\n      total = (item.price || 0) * count;\r\n    }\r\n\r\n    const booking = {\r\n      id,\r\n      itemType,\r\n      item,\r\n      name: data.name,\r\n      email: data.email,\r\n      passengers: count,\r\n      checkin: data.checkin || null,\r\n      checkout: data.checkout || null,\r\n      travelDate: data.travelDate || data.checkin || null,\r\n      extra: data.extra || null,\r\n      total\r\n    };\r\n\r\n    setBookings(prev => [booking, ...prev]);\r\n    return booking;\r\n  }\r\n\r\n  function removeBooking(id) {\r\n    setBookings(prev => prev.filter(b => b.id !== id));\r\n  }\r\n\r\n  function getBookingById(id) {\r\n    return bookings.find(b => b.id === id);\r\n  }\r\n\r\n  return (\r\n    <BookingContext.Provider value={{ searchResults, search, createBooking, getHotelById, getItemByAnyId, getBookingById, bookings, removeBooking }}>\r\n      {children}\r\n    </BookingContext.Provider>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}