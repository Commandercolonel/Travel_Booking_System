{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect}from'react';import{HOTELS,FLIGHTS,BUSES,TRAINS,TOURS}from'../data/mockData';import{jsx as _jsx}from\"react/jsx-runtime\";const BookingContext=/*#__PURE__*/createContext();export function useBooking(){return useContext(BookingContext);}export function BookingProvider(_ref){let{children}=_ref;const[searchResults,setSearchResults]=useState(HOTELS);const[bookings,setBookings]=useState(()=>{try{const raw=localStorage.getItem('bookings');return raw?JSON.parse(raw):[];}catch(e){return[];}});// persist bookings to localStorage\nuseEffect(()=>{try{localStorage.setItem('bookings',JSON.stringify(bookings));}catch(e){// ignore write errors\n}},[bookings]);function search(_ref2){let{destination}=_ref2;const q=(destination||'').toLowerCase();const results=HOTELS.filter(h=>h.name.toLowerCase().includes(q)||h.location.toLowerCase().includes(q));setSearchResults(results);}function getItemById(id){return HOTELS.find(i=>i.id===id)||FLIGHTS.find(i=>i.id===id)||BUSES.find(i=>i.id===id)||TRAINS.find(i=>i.id===id)||TOURS.find(i=>i.id===id)||null;}function createBooking(payload){// payload should include: itemId, itemType (optional), name, email, passengers, date, extra fields\nconst id=\"b\".concat(Date.now());const item=getItemById(payload.itemId);const passengers=Number(payload.passengers||payload.guests||1);const unitPrice=item&&item.price?Number(item.price):Number(payload.price||0);const total=unitPrice*passengers;const booking={id,item,itemType:payload.itemType||(item?HOTELS.includes(item)?'hotel':FLIGHTS.includes(item)?'flight':BUSES.includes(item)?'bus':TRAINS.includes(item)?'train':TOURS.includes(item)?'tour':'unknown':'unknown'),name:payload.name,email:payload.email,passengers,date:payload.date||payload.checkin||null,extras:payload.extras||{},total};setBookings(prev=>[booking,...prev]);return booking;}function removeBooking(id){setBookings(prev=>prev.filter(b=>b.id!==id));}function getBookingById(id){return bookings.find(b=>b.id===id);}return/*#__PURE__*/_jsx(BookingContext.Provider,{value:{searchResults,search,createBooking,getItemById,getBookingById,bookings,removeBooking},children:children});}","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","HOTELS","FLIGHTS","BUSES","TRAINS","TOURS","jsx","_jsx","BookingContext","useBooking","BookingProvider","_ref","children","searchResults","setSearchResults","bookings","setBookings","raw","localStorage","getItem","JSON","parse","e","setItem","stringify","search","_ref2","destination","q","toLowerCase","results","filter","h","name","includes","location","getItemById","id","find","i","createBooking","payload","concat","Date","now","item","itemId","passengers","Number","guests","unitPrice","price","total","booking","itemType","email","date","checkin","extras","prev","removeBooking","b","getBookingById","Provider","value"],"sources":["E:/Travel-Booking/travel-booking-app/frontend/src/context/BookingContext.jsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { HOTELS, FLIGHTS, BUSES, TRAINS, TOURS } from '../data/mockData';\r\n\r\nconst BookingContext = createContext();\r\n\r\nexport function useBooking() {\r\n  return useContext(BookingContext);\r\n}\r\n\r\nexport function BookingProvider({ children }) {\r\n  const [searchResults, setSearchResults] = useState(HOTELS);\r\n  const [bookings, setBookings] = useState(() => {\r\n    try {\r\n      const raw = localStorage.getItem('bookings');\r\n      return raw ? JSON.parse(raw) : [];\r\n    } catch (e) {\r\n      return [];\r\n    }\r\n  });\r\n\r\n  // persist bookings to localStorage\r\n  useEffect(() => {\r\n    try {\r\n      localStorage.setItem('bookings', JSON.stringify(bookings));\r\n    } catch (e) {\r\n      // ignore write errors\r\n    }\r\n  }, [bookings]);\r\n\r\n  function search({ destination }) {\r\n    const q = (destination || '').toLowerCase();\r\n    const results = HOTELS.filter(h => h.name.toLowerCase().includes(q) || h.location.toLowerCase().includes(q));\r\n    setSearchResults(results);\r\n  }\r\n\r\n  function getItemById(id) {\r\n    return HOTELS.find(i => i.id === id) || FLIGHTS.find(i => i.id === id) || BUSES.find(i => i.id === id) || TRAINS.find(i => i.id === id) || TOURS.find(i => i.id === id) || null;\r\n  }\r\n\r\n  function createBooking(payload) {\r\n    // payload should include: itemId, itemType (optional), name, email, passengers, date, extra fields\r\n    const id = `b${Date.now()}`;\r\n    const item = getItemById(payload.itemId);\r\n    const passengers = Number(payload.passengers || payload.guests || 1);\r\n    const unitPrice = item && item.price ? Number(item.price) : Number(payload.price || 0);\r\n    const total = unitPrice * passengers;\r\n\r\n    const booking = {\r\n      id,\r\n      item,\r\n      itemType: payload.itemType || (item ? (HOTELS.includes(item) ? 'hotel' : FLIGHTS.includes(item) ? 'flight' : BUSES.includes(item) ? 'bus' : TRAINS.includes(item) ? 'train' : TOURS.includes(item) ? 'tour' : 'unknown') : 'unknown'),\r\n      name: payload.name,\r\n      email: payload.email,\r\n      passengers,\r\n      date: payload.date || payload.checkin || null,\r\n      extras: payload.extras || {},\r\n      total\r\n    };\r\n\r\n    setBookings(prev => [booking, ...prev]);\r\n    return booking;\r\n  }\r\n\r\n  function removeBooking(id) {\r\n    setBookings(prev => prev.filter(b => b.id !== id));\r\n  }\r\n\r\n  function getBookingById(id) {\r\n    return bookings.find(b => b.id === id);\r\n  }\r\n\r\n  return (\r\n    <BookingContext.Provider value={{ searchResults, search, createBooking, getItemById, getBookingById, bookings, removeBooking }}>\r\n      {children}\r\n    </BookingContext.Provider>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}